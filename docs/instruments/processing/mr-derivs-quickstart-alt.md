# MRI Derivatives Quick Start Guide

Below is a summary of key MRI derivatives used for analysis. Most are generated by the **XCP-D** pipeline, which builds on BIBSNet and Infant-fMRIPrep outputs to produce fully preprocessed, denoised, and quality-assessed data. These XCP-D and related pipeline derivatives support both structural morphology and functional connectivity analyses.

<div id="resources" class="table-banner" onclick="toggleCollapse(this)">
  <span class="emoji"><i class="fa-solid fa-circle-info"></i></span>
  <span class="text-with-link">
  <span class="text">Additional Resources</span>
  <a class="anchor-link" href="#resources" title="Copy link">
  <i class="fa-solid fa-link"></i>
  </a>
  </span>
  <span class="arrow">▸</span>
</div>
<div class="collapsible-content">
<p> 
<a href="../../../datacuration/file-based-data/#derivatives" target="_blank"><i style="font-size: 0.9em;" class="fa-solid fa-up-right-from-square"></i> HBCD Derivatives</a>: List of MRI pipeline derivatives with links to documentation<br>
<a href="../../mri/fmri/#xcpd" target="_blank"><i style="font-size: 0.9em;" class="fa-solid fa-up-right-from-square"></i> fMRI Release Data (XCP-D)</a>: Overview of XCP-D derivatives included in the HBCD release<br>
<a href="https://hbcd-cbrain-processing.readthedocs.io/latest/tools/xcp_d.html"><i style="font-size: 0.9em;" class="fa-solid fa-up-right-from-square"></i> HBCD Processing Documentation (XCP-D)</a>: Pipeline parameters and configurations used for HBCD processing<br>
<a href="https://xcp-d.readthedocs.io/en/latest/outputs.html#outputs-of-xcp-d"><i style="font-size: 0.9em;" class="fa-solid fa-up-right-from-square"></i> Official XCP-D Documentation</a>: Comprehensive documentation of all XCP-D outputs
</p>
</div>

## Structural Morphology

XCP-D produces several surface-based derivatives commonly used to assess cortical features, available within the XCP-D `anat/` subfolders ([see full file tree](../mri/smri.md#xcpd)).  This includes **thickness**, **curvature**, and **sulcal depth**, often summarized within atlas-defined regions or compared across subjects to study cortical development and brain morphology. Here we highlight key files and their recommended usage.

#### Curvature, Sulcal Depth, & Cortical Thickness
<p style="margin-bottom: 5px;"><i>
<code>anat/sub-{ID}_ses-{V0X}_run-{X}_space-fsLR_den-91k_<span style="color: teal;">&lt;curv|sulc|thickness&gt;</span>.dscalar.nii</code>
</i></p>
Surface-based structural metrics provided as CIFTI scalar files, derived from reconstructed L/R cortical surfaces and aligned to the standard fsLR template (~64k vertices per hemisphere). **Curvature** is used to characterize cortical folding/morphology, as a covariate in morphometric analyses, and/or with **sulcal depth** to describe cortical shape and folding complexity. **Cortical thickness**, which reflects the distance (mm) between corresponding vertices on the pial and white matter surfaces, is often averaged within ROIs or compared across subjects to study cortical development, aging, or group differences.

#### Parcellated Structural Measures
<p style="margin-bottom: 5px;"><i>
<code>anat/sub-{ID}_ses-{V0X}_run-{X}_space-fsLR_seg-<span style="color: teal;">&lt;PARC&gt;</span>_stat-mean_desc-<span style="color: teal;">&lt;curv|sulc|thickness&gt;</span>_morph.tsv</code></i></p>
Tabulated summaries of cortical metrics (curvature, sulcal depth, thickness) within anatomical regions defined by [parcellation atlases](#parcellations). **Use these for region-based (ROI-level) statistical analyses, especially for group comparisons or developmental modeling.**

#### Midthickness, Pial, and White Matter Surfaces
<p style="margin-bottom: 5px;"><i>
<code>anat/sub-{ID}_ses-{V0X}_run-{X}_hemi-<span style="color: teal;">&lt;L|R&gt;</span>_space-fsLR_den-32k_<span style="color: teal;">&lt;midthickness|pial|white&gt;</span>.surf.gii</code></i></p>
3D surface models representing the midthickness, gray–white matter boundary, and the pial surface for each hemisphere. **Commonly used for visualizing cortical anatomy, computing surface-based metrics, or mapping functional data to anatomical space.**

## Functional Connectivity

XCP-D produces several derivative outputs designed for resting state functional MRI functional connectivity (FC) and time series analyses, available within the `func/` subfolder ([see full file tree](../mri/fmri.md#xcpd)). These include **denoised BOLD data**, **parcellated time series**, and **derived connectivity matrices**, along with **frame displacement and confound files** to support motion correction and data quality assessment. Together, these provide clean and standardized measures of resting state brain measures for both voxelwise and region-based network analyses. Here we highlight key files and their recommended usage.

#### Dense Timeseries
<p style="margin-bottom: 5px;"><i>
<code>func/sub-{ID}_ses-{V0X}_task-rest_space-fsLR_den-91k_desc-<span style="color: teal;">&lt;denoised|denoisedSmoothed&gt;</span>_bold.dtseries.nii</code></i></p>
CIFTI dense time series containing fully preprocessed, temporally filtered, and nuisance-regressed BOLD data. These files combine the left and right surfaces, aligned to the standard fsLR surface template, with the subcortical volume annotated by subcortical structure. Each greyordinate (vertex/voxel) contains a pre-processed resting-state functional MRI time-series (~96k greyordinates total). **Use dense timeseries files for voxelwise FC analyses, seed-based correlation maps, other data-driven connectivity methods, or timeseries analysis via sliding windows or markov chains.**

#### Parcellated Timeseries
<p style="margin-bottom: 5px;"><i>
<code>func/sub-{ID}_ses-{V0X}_task-rest_space-fsLR_seg-<span style="color: teal;">&lt;PARC&gt;</span>_stat-mean_timeseries.tsv</code></i></p>
Tabulated mean BOLD time series for each region in the [parcellation atlases](#parcellations). Also available as CIFTI files (`*_stat-mean_timeseries.ptseries.nii`), where each column corresponds to a brain region, and each row to a timepoint. **Ideal for computing ROI-to-ROI connectivity matrices or for timeseries analysis via sliding windows or markov chains.**

#### Connectivity Matrices
<p style="margin-bottom: 5px;"><i>
<code>func/sub-{ID}_ses-{V0X}_task-rest_space-fsLR_seg-<span style="color: teal;">&lt;PARC&gt;</span>_stat-pearsoncorrelation_relmat.tsv</code></i></p>
Tab-delimited matrices of pairwise Pearson correlations between atlas regions, computed from the parcellated time series. **Useful for quick inspection, validation, as input for group-level analyses, or performing network and graph analyses.**

#### Motion Detection and Confound Files
<p style="margin-bottom: 5px;"><i>
<code>func/sub-{ID}_ses-{V0X}-task-rest_dir-PA_run-{X}_<span style="color: teal;">&lt;design|motion|outliers&gt;</span>.tsv</code></i></p>
Include framewise displacement values and nuisance regressor design files. The design files (`*_design.tsv`) contain one column per regressor (e.g., motion parameters and one-hot indicators for high-motion outlier volumes). **Recommended for identifying and filtering low-quality data before group analyses. See [XCP-D documentation](https://xcp-d.readthedocs.io/en/latest/outputs.html#other-outputs-include-quality-control-framewise-displacement-and-confounds-files) for details.**

## <i class="fa-solid fa-book-atlas"></i> Parcellations

See <a href="https://xcp-d.readthedocs.io/en/latest/outputs.html#parcellations-and-atlases">Parcellations & Atlases</a> in the XCP-D documentation for details additional details.

<table class="compact-table-no-vertical-lines" style="width: 100%; border-collapse: collapse; table-layout: fixed;">
<thead>
<tr>
  <th>Atlas</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Glasser</td>
  <td style="word-wrap: break-word; white-space: normal;">Recommended for population-level anatomical maps (<a href="https://doi.org/10.1038/nature18933">Glasser et al., 2016</a>).</td>
</tr>
<tr>
  <td>Gordon</td>
  <td style="word-wrap: break-word; white-space: normal;">Gordon's 333 ROI template, parcellated using boundary detection on rs-fMRI data from 120 young adults with 14 minutes of data collected on average (<a href="https://doi.org/10.1093/cercor/bhu239">Gordon et al. 2016</a>). Recommended for population-level functional network maps.</td>
</tr>
<tr>
  <td>MIDB</td>
  <td style="word-wrap: break-word; white-space: normal;">MIDB precision brain atlas derived from ABCD data and thresholded at 75% probability (<a href="https://doi.org/10.1038/s41593-024-01596-5">Hermosillo et al., 2024</a>). Recommended for individualized functional network maps.</td>
</tr>
<tr>
<td>Myers Labonte</td>
<td style="word-wrap: break-word; white-space: normal;">Myers-Labonte infant probabilistic atlas thresholded at 50% probability (<a href="https://doi.org/10.1101/2023.11.10.566629" target="_blank">Meyers et al., 2023</a>)</td>
</tr>
<tr>
  <td>HCP</td>
  <td style="word-wrap: break-word; white-space: normal;">HCP's 360 ROI template, parcellated from mutli-modal task, rest, and diffusion MRI data on 210 young adults (<a href="https://doi.org/10.1016/j.neuroimage.2013.04.127">Glasser et al., 2013</a>).</td>
</tr>
<tr>
  <td>Tian</td>
  <td>See <a href="https://doi.org/10.1038/s41593-020-00711-6">Tian et al., 2020</a></td>
</tr>
<tr>
  <td>4S Atlas</td>
  <td style="word-wrap: break-word; white-space: normal;">The 4S (Schaefer Supplemented with Subcortical Structures) atlas combines the <a href="https://doi.org/10.1093/cercor/bhx179">Schaefer 2018</a> cortical atlas (version v0143) at 10 different resolutions (100, 200, 300, 400, 500, 600, 700, 800, 900, and 1000 parcels) with the CIT168 subcortical atlas (<a href="https://doi.org/10.1038/sdata.2018.63">Pauli et al. 2018</a>), the Diedrichson cerebellar atlas (<a href="https://doi.org/10.1038/s41593-019-0436-x">King et al., 2019</a>), the HCP thalamic atlas (<a href="https://doi.org/10.1038/sdata.2018.270">Najdenovska et al., 2018</a>), and the amygdala and hippocampus parcels from the HCP CIFTI subcortical parcellation (<a href="https://doi.org/10.1016/j.neuroimage.2013.04.127">Glasser et al., 2013</a>). The 4S atlas is used in the same manner across three PennLINC BIDS Apps: XCP-D, QSIPrep, and ASLPrep, to produce synchronized outputs across modalities. For details: <a href="https://github.com/PennLINC/AtlasPack">https://github.com/PennLINC/AtlasPack</a>.</td>
</tr>
</tbody>
</table>



