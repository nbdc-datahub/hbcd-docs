# Quality Control Procedures   

## QC Dashboard

After EEG acquisition, quality control checks are performed using [EEG2BIDS Wizard](https://github.com/aces/eeg2bids), a custom MATLAB application installed at all HBCD sites. These checks are immediately provided to the user to ensure the data's integrity and usability. The process includes:

- Verifying event markers in the EEG data to confirm all required events are accurately recorded.
- Ensuring the setup for stimulus presentation and EEG data acquisition adheres to the study protocol.
- Inspecting electrode impedances to ensure they are within acceptable limits.
- Detecting multiple task runs and incomplete recordings.
- Confirming the use of correct E-Prime task versions.

Both study sites and the EEG Core team use an EEG Quality Control dashboard developed by LORIS to access and monitor incoming EEG data and QC metrics, such as retained epochs and line noise levels. Outputs from the HBCD-Maryland Analysis of Developmental EEG ([HBCD-MADE](https://hbcd-made.readthedocs.io/en/latest/)) pipeline, which handles preprocessing and data cleaning, are also integrated into the dashboard. These outputs include key metrics like outlier statistics for specific task epochs ([Debnath et al., 2020](https://doi.org/10.1111/psyp.13580)). Regular site-specific check-ins and troubleshooting are conducted to ensure consistent protocol adherence and data quality across sites. For a detailed description of QC procedures in the HBCD Study EEG protocol, refer to [Fox et al., 2024](https://doi.org/10.1016/j.dcn.2024.101447).

During quality control, a frequently observed issue across all tasks was the irregular application of EEG sensors. Additionally, partial task completion due to infant fussing and missing stimulus flags were commonly noted for the faces and auditory mismatch negativity tasks.

## Stimtracker Artifact Detection

<div class="table-banner">
  <span class="emoji"><i class="fa-regular fa-lightbulb"></i></span>
  <span class="text">Presence of the StimTracker artifact is listed in the tabulated QC file for each task (<code>eeg_qc_task-&lt;task&gt;</code>).</span>
</div>
<p></p>

The StimTracker device is used during the acquisition of EEG for the V03, V04, and V06 protocols. It provides accurate timing of the onset of either an auditory or visual stimulus as well as indicates the onset and end of each task. The EEG Core identified the presence of an electrical artifact at the stimulus onset and offset brought on by an electrical spike generated by the StimTracker. This artifact is present in only a subset of files collected with the current HBCD systems. The EEG Core checked for the presence of the artifact in all raw EEG data using a custom MATLAB script. This script averages all epochs per task and detects voltage fluctuations that are characteristic of the StimTracker artifact. Specifically, it checks for voltage fluctuations in the raw data exceeding 1ÂµV in two time windows: -10 ms to 10 ms, and 250 ms to 270 ms (onset and offset of the voltage spike).

Files that were automatically identified as containing the artifact in the raw data were scanned for visual presence of the artifact in the processed data. If the artifact was still visible in the processed data, the file for purposes of the data release was denoted as containing the StimTracker artifact. Files containing the artifact in the raw data but not the processed data were denoted as not containing the StimTracker artifact. Files containing the artifact in the raw data but not the processed data were denoted as not containing the StimTracker artifact, due to sufficient artifact removal during MADE preprocessing. We have created ERPs for the regions of interest for each of the tasks. In our view, the presence of the StimTracker artifact does not effect the latency or amplitude of the ERPs. However, we encourage individual users to examine the effects of the artifact if they wish. 
   
<div style="text-align: center;">
  <div style="display: inline-block; width: 70%;">
    <img src="../images/Fig1.png" style="width: 100%; height: auto; display: block; margin: 0 auto;">
    <p style="font-size: 0.9em; margin-top: 5px; text-align: left;">
      <i>Fig 1. Example of the electrical artifact detected in the MMN auditory oddball task in E55. 
      The artifact is characterized by the negative deflection of the signal at the stimulus onset 
      and the positive deflection of the signal at offset.</i>
    </p>
  </div>
</div>

## EEG Net Placement ("Capping Quality") Ratings

EEG capping quality ratings are used to determine inclusion in data processing. Capping ratings are included in the tabulated QC files for each task (`eeg_qc_task-<TASK>`).

Photos used to assess EEG capping quality are taken for each acquisition from the front, back, top, left, and right angles of the participant's head and uploaded via the BIDS Wizard application to a secure computing environment. They are then reviewed by the EEG Core at the University of Maryland to rate the quality of EEG net placement, or "capping quality," for each acquisition.

<table class="table-no-vertical-lines" style="width: 100%; border-collapse: collapse; table-layout: fixed;">
<tbody>
<tr>
  <td><strong>Markers of Proper Net Placement</strong></td>
  <td style="word-wrap: break-word; white-space: normal;">
    <ol>
    <li>Reference electrode <strong>(REF)</strong> is on the vertex </li>
    <li>Nasion electrode <strong>(#17)</strong> is between the eyebrows</li>
    <li>Ear electrodes <strong>(#44, #114)</strong> are on the preauricular point</li>
    </ol>
  </td>
</tr>
<tr>
<td><strong>Net Placement Rubric</strong></td>
  <td style="word-wrap: break-word; white-space: normal;">
    <ul>
    <li><strong>Excellent</strong> - all markers are <strong>0 - 0.5 cm</strong> from proper net placement </li>
    <li><strong>Average</strong> - any marker is <strong>0.5 - 2 cm</strong> from proper placement</li>
    <li><strong>Poor</strong> - any marker is <strong>2 - 3 cm</strong> from proper placement</li>
    <li><strong>Very Poor</strong> - any marker is  <strong>&gt; 3 cm</strong> from proper placement</li>
    </ul>
  </td>
</tr>
</tbody>
</table>

Please refer to the [HBCD EEG Acquisition Protocol](https://zenodo.org/records/14795030) for additional information about capping requirements.

<br>